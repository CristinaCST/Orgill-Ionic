<!-- Customer Location Page Header -->
<ion-header>
  <!-- Customer Location Page Navigation Bar -->
  <navbar [title]="'customer_locations'" [isMenuEnabled]="true" [isBackEnabled]="false"></navbar>
  <!-- Customer Location Page Search Bar -->
  <search-bar [showBackButton]="true"
              (searched)="onSearched($event)"></search-bar>
</ion-header>

<ion-content [(ngSwitch)]="isFlashDeal">

  <ion-item *ngIf="noLocation">
    {{"customer_locations_no_location" | translate}}
  </ion-item>

  <!-- Locations if not hot deal -->
  <ion-item-group *ngSwitchCase="false">
  <ion-item-group padding class="post-container">
    <ion-item-divider *ngIf="!noLocation" no-lines>{{"customer_locations_po" | translate}}:</ion-item-divider>
    <ion-item>
      <ion-input [(ngModel)]="postOffice" type="text"
                 placeholder="{{'customer_locations_po_hint' | translate}}"></ion-input>
    </ion-item>
  </ion-item-group>
  <ion-item-group [(ngModel)]="selectedLocation" padding radio-group class="locations-container">

    
    <ion-item-divider no-lines>{{"customer_locations_list_header" | translate}}:</ion-item-divider>
    <ion-item *ngFor="let userLocation of userLocations">
        <ion-item>
            <ion-input [(ngModel)]="postOffice" type="text"
                       placeholder="{{'customer_locations_po_hint' | translate}}"></ion-input>
          </ion-item>
      <ion-label>
        <p [class]="selectedLocation===userLocation?'active':''"> {{userLocation.CUSTOMERNAME}} </p>
        <p> {{userLocation.ADDRESS}}</p>
      </ion-label>
      <ion-radio [value]="userLocation"></ion-radio>
    </ion-item>
  </ion-item-group>
</ion-item-group>

<!-- Locations if it is hot deals -->
<ion-item-group *ngSwitchCase="true">
  <ion-item-group [(ngModel)]="selectedLocation" padding radio-group class="locations-container">


    <ion-item-divider *ngIf="!noLocation" no-lines>{{"customer_locations_list_header" | translate}}:</ion-item-divider>
    <ion-list *ngFor="let hotDealLocation of hotDealLocations;">

      <ion-item>
        <ion-checkbox [(ngModel)]="hotDealLocation.checked" class="checkbox-item" item-end></ion-checkbox>

        <ion-label>
          <p [class]="selectedLocation===hotDealLocation?'active':''"> {{hotDealLocation.location.CUSTOMERNAME}} </p>
          <p> {{hotDealLocation.location.ADDRESS}}</p>
        </ion-label>
      </ion-item>


      <ion-row>
        <ion-col >
          <ion-item class="po-label"> {{"customer_locations_po" | translate}}: </ion-item>
        </ion-col>
        <ion-col >
          <ion-input #POinput class="po-input" [(ngModel)]="hotDealLocation.postOff" type="number"
            placeholder="{{'customer_locations_po_hint' | translate}}">
          </ion-input>
        </ion-col>
      </ion-row>

      <ion-row>
          <ion-col col-4>
            <ion-item class="qt-label"> {{"customer_locations_qty" | translate}}: </ion-item>
          </ion-col>
          <ion-col col-2>
              <button ion-button icon-only small clear (click)="remove(hotDealLocation)">
                  <ion-icon name="remove" color="OrgillRed"></ion-icon>
                </button>
          </ion-col>

          <ion-col col-4>
            <ion-input #QTYinput class="po-input" [(ngModel)]="hotDealLocation.quantity" type="number"
              placeholder="{{'customer_locations_qty_hint' | translate}}">
            </ion-input>

          </ion-col>
          <ion-col col-2>
            <button ion-button icon-only small clear (click)="add(hotDealLocation)">
                <ion-icon name="add" color="OrgillRed"></ion-icon>
              </button>
          </ion-col>
        </ion-row>


    </ion-list>

  </ion-item-group>
</ion-item-group>

</ion-content>

<ion-footer padding>
  <button *ngIf="!isFlashDeal" ion-button block outline color="OrgillLightGray" (click)="sendToOrgill()">
    {{"customer_locations_send_to_orgill" | translate}}
  </button>
  <button  ion-button block color="OrgillRed" (click)="checkout()">
    {{"shopping_list_checkout" | translate}}
  </button>
  
</ion-footer>

