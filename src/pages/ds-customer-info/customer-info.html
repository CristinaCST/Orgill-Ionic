<ion-header class="vendor-nav-header">
  <ion-navbar>
    <ion-title>{{"dropship_page_customer_info_title" | translate | uppercase}}</ion-title>
  </ion-navbar>
</ion-header>

<ion-content class="dropship-content customer-info">
  <h3 class="dropship-header">{{"dropship_customer_info_header" | translate}}</h3>

  <div class="form-wrapper">
    <form class="customer-info-form" [formGroup]="customerInfoForm">
      <ion-list>
        <ion-item class="input-item-wrapper">
          <ion-label class="input-label" stacked>
            {{"dropship_customer_info_customer_number" | translate}}<span>*</span>:
            <span *ngIf="formControls.customer_number.errors?.required && formControls.customer_number.touched">
              (Required)
            </span>
            <span *ngIf="formControls.customer_number.errors?.pattern && formControls.customer_number.touched">
              (Not a valid number)
            </span>
          </ion-label>
          <ion-input
            class="input-item"
            formControlName="customer_number"
            type="tel"
            inputmode="numeric"
            (focusout)="handleCustomerNumber($event.target.value)"
            (keydown.enter)="$event.target.blur()"
          ></ion-input>
        </ion-item>

        <ion-item class="input-item-wrapper">
          <ion-label class="input-label" stacked> {{"dropship_customer_info_user_name" | translate}}: </ion-label>
          <ion-select
            class="input-item"
            formControlName="selected_user"
            (ngModelChange)="handleSelect($event)"
            [disabled]="!usernames.length"
          >
            <ion-option value="">None</ion-option>
            <ion-option *ngFor="let user of usernames" [value]="user">{{user.user_name}}</ion-option>
          </ion-select>
        </ion-item>

        <ion-item class="input-item-wrapper">
          <ion-label class="input-label" stacked>
            {{"dropship_customer_info_first_name" | translate}}<span>*</span>:
            <span *ngIf="formControls.first_name.errors?.required && formControls.first_name.touched">
              (Required)
            </span>
          </ion-label>
          <ion-input class="input-item" formControlName="first_name" type="text"></ion-input>
        </ion-item>

        <ion-item class="input-item-wrapper">
          <ion-label class="input-label" stacked>
            {{"dropship_customer_info_last_name" | translate}}<span>*</span>:
            <span *ngIf="formControls.last_name.errors?.required && formControls.last_name.touched"> (Required) </span>
          </ion-label>
          <ion-input class="input-item" formControlName="last_name" type="text"></ion-input>
        </ion-item>

        <ion-item class="input-item-wrapper">
          <ion-label class="input-label" stacked
            >Email<span>*</span>:
            <ng-container *ngIf="formControls.email.touched">
              <span *ngIf="formControls.email.errors?.required "> (Required) </span>
              <span *ngIf="formControls.email.errors?.email  "> (Invalid email) </span>
            </ng-container>
          </ion-label>
          <ion-input class="input-item" formControlName="email" type="email"></ion-input>
        </ion-item>

        <ion-item class="input-item-wrapper">
          <ion-label class="input-label" stacked>
            {{"dropship_customer_info_phone_number" | translate}}<span>*</span>:
            <span *ngIf="formControls.phone.errors?.required && formControls.phone.touched"> (Required) </span>
          </ion-label>
          <ion-input class="input-item" formControlName="phone" type="tel"></ion-input>
        </ion-item>

        <ion-item class="input-item-wrapper">
          <ion-label class="input-label" stacked>
            {{"dropship_customer_info_ship_date" | translate}}<span>*</span>:
            <span *ngIf="formControls.ship_date.errors?.required && formControls.ship_date.touched"> (Required) </span>
          </ion-label>
          <ion-datetime class="input-item" formControlName="ship_date" displayFormat="MM/DD/YYYY"></ion-datetime>
        </ion-item>

        <ion-item class="input-item-wrapper">
          <ion-label class="input-label" stacked>{{"dropship_customer_info_po_number" | translate}}:</ion-label>
          <ion-input class="input-item" formControlName="po_number" type="text"></ion-input>
        </ion-item>
      </ion-list>
    </form>
  </div>

  <div class="btn-group">
    <!-- <button class="btn-save-draft" ion-button block [disabled]="!customerInfoForm.valid" (click)="saveForm()">
    {{"dropship_save_draft" | translate}}
  </button> -->
    <button class="btn-next-step" ion-button block [disabled]="!customerInfoForm.valid" (click)="saveForm()">
      {{"dropship_next_step" | translate}}
    </button>
  </div>
</ion-content>
